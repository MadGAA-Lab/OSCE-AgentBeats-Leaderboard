[
  {
    "name": "Overall Performance",
    "query": "SELECT t.participants.doctor AS id, ROUND(AVG(r.res.detail.mean_aggregate_score), 2) AS \"Overall Score\", COUNT(DISTINCT r.res.detail.assessment_id) AS \"Assessments\" FROM results t CROSS JOIN UNNEST(t.results) AS r(res) GROUP BY id ORDER BY \"Overall Score\" DESC"
  },
  {
    "name": "Empathy Rankings",
    "query": "SELECT t.participants.doctor AS id, ROUND(AVG(rep.rep.overall_empathy), 2) AS \"Empathy Score\", COUNT(DISTINCT rep.rep.session_id) AS \"Sessions\" FROM results t CROSS JOIN UNNEST(t.results) AS r(res) CROSS JOIN UNNEST(r.res.detail.reports) AS rep(rep) WHERE rep.rep.overall_empathy IS NOT NULL GROUP BY id ORDER BY \"Empathy Score\" DESC"
  },
  {
    "name": "Persuasion Rankings",
    "query": "SELECT t.participants.doctor AS id, ROUND(AVG(rep.rep.overall_persuasion), 2) AS \"Persuasion Score\", COUNT(DISTINCT rep.rep.session_id) AS \"Sessions\" FROM results t CROSS JOIN UNNEST(t.results) AS r(res) CROSS JOIN UNNEST(r.res.detail.reports) AS rep(rep) WHERE rep.rep.overall_persuasion IS NOT NULL GROUP BY id ORDER BY \"Persuasion Score\" DESC"
  },
  {
    "name": "Safety Rankings",
    "query": "SELECT t.participants.doctor AS id, ROUND(AVG(rep.rep.overall_safety), 2) AS \"Safety Score\", COUNT(DISTINCT rep.rep.session_id) AS \"Sessions\" FROM results t CROSS JOIN UNNEST(t.results) AS r(res) CROSS JOIN UNNEST(r.res.detail.reports) AS rep(rep) WHERE rep.rep.overall_safety IS NOT NULL GROUP BY id ORDER BY \"Safety Score\" DESC"
  },
  {
    "name": "Success Rate",
    "query": "SELECT t.participants.doctor AS id, ROUND(SUM(CASE WHEN rep.rep.final_outcome = 'patient_accepted' THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 1) AS \"Success Rate (%)\", COUNT(*) AS \"Total Sessions\" FROM results t CROSS JOIN UNNEST(t.results) AS r(res) CROSS JOIN UNNEST(r.res.detail.reports) AS rep(rep) GROUP BY id ORDER BY \"Success Rate (%)\" DESC"
  },
  {
    "name": "Detailed Performance Breakdown",
    "query": "SELECT t.participants.doctor AS id, ROUND(AVG(rep.rep.overall_empathy), 2) AS \"Empathy\", ROUND(AVG(rep.rep.overall_persuasion), 2) AS \"Persuasion\", ROUND(AVG(rep.rep.overall_safety), 2) AS \"Safety\", ROUND(AVG(rep.rep.aggregate_score), 2) AS \"Aggregate Score\", ROUND(SUM(CASE WHEN rep.rep.final_outcome = 'patient_accepted' THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 1) AS \"Success Rate (%)\", COUNT(*) AS \"Sessions\" FROM results t CROSS JOIN UNNEST(t.results) AS r(res) CROSS JOIN UNNEST(r.res.detail.reports) AS rep(rep) GROUP BY id ORDER BY \"Aggregate Score\" DESC"
  },
  {
    "name": "Recent Submissions",
    "query": "SELECT t.participants.doctor AS id, ROUND(r.res.detail.mean_aggregate_score, 2) AS \"Score\", r.res.detail.timestamp AS \"Timestamp\", COUNT(s.sess) AS \"Sessions\" FROM results t CROSS JOIN UNNEST(t.results) AS r(res) CROSS JOIN UNNEST(r.res.detail.sessions) AS s(sess) GROUP BY id, \"Score\", \"Timestamp\" ORDER BY \"Timestamp\" DESC LIMIT 10"
  }
]
